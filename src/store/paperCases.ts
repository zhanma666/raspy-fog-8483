// 论文案例库管理

export interface PaperCase {
  id: string;
  title: string;
  subject: string;
  year: string;
  author: string;
  content: {
    abstract: string;
    background: string;
    problemAnalysis: string;
    solution: string;
    implementation: string;
    results: string;
    conclusion: string;
  };
  keywords: string[];
  grade: 'excellent' | 'good' | 'pass';
  evaluation: {
    strengths: string[];
    weaknesses: string[];
    suggestions: string[];
  };
}

// 系统架构设计师优秀案例
export const sysArchExcellentCase: PaperCase = {
  id: 'sys_arch_excellent_001',
  title: '基于微服务架构的电商平台设计与实践',
  subject: '系统架构设计师',
  year: '2023',
  author: '张三',
  content: {
    abstract: '本文以某电商平台升级改造为例，探讨了微服务架构在大型电商平台中的应用。通过采用微服务架构，解决了单体应用在扩展性、可维护性和部署灵活性方面的瓶颈，实现了系统的高可用性和高性能。',
    background: '随着业务的快速发展，原有的单体架构电商平台逐渐暴露出性能瓶颈、扩展困难等问题。平台日订单量超过百万级别，系统响应缓慢，功能迭代周期长，严重影响用户体验和业务发展。因此，公司决定对现有系统进行架构改造，采用微服务架构以提升系统的可扩展性和可维护性。',
    problemAnalysis: '原有单体架构存在以下主要问题：\n1. 技术栈耦合严重，修改一处功能可能影响整个系统；\n2. 部署困难，即使微小改动也需要停机重新部署整个应用；\n3. 扩展性差，无法针对特定业务模块进行独立扩展；\n4. 团队协作困难，多人同时开发同一代码库导致冲突频繁。',
    solution: '采用微服务架构解决方案：\n1. 将单体应用拆分为用户服务、商品服务、订单服务、支付服务等独立服务；\n2. 使用Spring Cloud框架构建微服务生态系统；\n3. 采用API网关统一管理服务访问；\n4. 引入分布式配置中心和服务注册发现机制；\n5. 实现分布式事务处理保证数据一致性。',
    implementation: '实施过程分为三个阶段：\n第一阶段：搭建微服务基础设施，包括Eureka注册中心、Config配置中心、Gateway网关；\n第二阶段：逐步拆分单体应用，按业务域划分微服务，实现服务间的通信；\n第三阶段：完善监控体系，实现链路追踪、日志聚合、性能监控等功能。',
    results: '经过6个月的实施，系统性能显著提升：\n1. 系统响应时间下降60%，平均响应时间从2秒降至0.8秒；\n2. 订单处理能力提升3倍，支持日订单量达到300万笔；\n3. 部署频率提升5倍，从每月1次提升到每周2-3次；\n4. 系统可用性达到99.9%以上。',
    conclusion: '通过本次架构改造，成功实现了系统从单体架构向微服务架构的转型。实践证明，微服务架构在提升系统扩展性、可维护性和部署灵活性方面具有明显优势。但同时也需要注意分布式系统带来的复杂性挑战，需要完善的治理机制和运维保障。未来将继续优化服务治理，探索云原生技术的应用。'
  },
  keywords: ['微服务', '架构设计', '电商平台', '系统改造'],
  grade: 'excellent',
  evaluation: {
    strengths: [
      '架构设计思路清晰，技术选型合理',
      '问题分析深入，解决方案针对性强',
      '实施过程详实，效果数据具体',
      '经验总结深刻，具有推广价值'
    ],
    weaknesses: [
      '对微服务拆分粒度的考虑可以更详细',
      '分布式事务处理方案描述不够深入'
    ],
    suggestions: [
      '可以进一步细化微服务拆分原则和最佳实践',
      '补充更多关于服务治理和监控的内容'
    ]
  }
};

// 系统架构设计师良好案例
export const sysArchGoodCase: PaperCase = {
  id: 'sys_arch_good_001',
  title: '企业级数据仓库架构设计与实现',
  subject: '系统架构设计师',
  year: '2023',
  author: '李四',
  content: {
    abstract: '本文介绍了在某大型制造企业中构建企业级数据仓库的实践经验。通过构建统一的数据仓库平台，整合分散在各业务系统的数据，为企业决策提供了有力支撑。',
    background: '该制造企业拥有ERP、CRM、SCM等多个业务系统，数据分散存储，缺乏统一的数据视图。管理层难以快速获取企业运营状况，数据利用率低，决策效率不高。为解决这一问题，公司启动了企业级数据仓库建设项目。',
    problemAnalysis: '企业面临的主要问题包括：\n1. 数据孤岛现象严重，各系统数据无法共享；\n2. 数据标准不统一，相同字段在不同系统中含义不同；\n3. 缺乏历史数据积累，无法进行趋势分析；\n4. 数据质量问题突出，影响分析准确性。',
    solution: '采用分层架构的数据仓库解决方案：\n1. 构建ODS操作数据层，实现源系统数据抽取；\n2. 建立DW数据仓库层，进行数据清洗和标准化；\n3. 创建DM数据集市层，面向特定业务主题；\n4. 建设前端展示层，提供灵活的数据分析能力。',
    implementation: '项目实施过程：\n1. 数据调研和需求分析；\n2. 数据模型设计和ETL流程开发；\n3. 数据仓库平台搭建和数据迁移；\n4. BI工具集成和报表开发；\n5. 用户培训和上线支持。',
    results: '数据仓库上线后取得良好效果：\n1. 数据查询效率提升80%；\n2. 决策支持响应时间从小时级缩短到分钟级；\n3. 数据一致性问题得到有效解决；\n4. 为企业建立了完善的数据资产。',
    conclusion: '企业级数据仓库的建设是一项复杂的系统工程，需要统筹考虑技术、业务和管理等多方面因素。通过本次项目实践，积累了宝贵经验，为后续数据驱动的企业数字化转型奠定了基础。'
  },
  keywords: ['数据仓库', '企业级', '数据分析', '架构设计'],
  grade: 'good',
  evaluation: {
    strengths: [
      '业务背景描述清晰',
      '解决方案架构完整',
      '实施过程有条理'
    ],
    weaknesses: [
      '技术深度有待加强',
      '问题分析相对简单'
    ],
    suggestions: [
      '深化技术方案的阐述',
      '加强架构设计的创新性'
    ]
  }
};

// 信息系统项目管理师案例
export const projMgrCase: PaperCase = {
  id: 'proj_mgr_case_001',
  title: '大型ERP系统实施项目的风险管理实践',
  subject: '信息系统项目管理师',
  year: '2023',
  author: '王五',
  content: {
    abstract: '本文以某集团企业ERP系统实施项目为例，探讨了信息系统项目中的风险管理实践。通过建立完善的风险管理体系，有效控制了项目风险，确保项目按期保质完成。',
    background: '该集团企业决定实施ERP系统以提升管理效率，项目涉及财务、采购、销售、库存等多个业务模块，实施周期12个月，预算500万元。项目复杂度高，涉及多个业务部门和外部供应商，风险因素众多。',
    problemAnalysis: '项目面临的主要风险包括：\n1. 业务需求变更风险：用户需求不明确，后期频繁变更；\n2. 技术风险：系统集成复杂，技术难点较多；\n3. 人员风险：关键人员流失，用户接受度低；\n4. 进度风险：任务依赖关系复杂，进度控制困难。',
    solution: '建立全面的风险管理体系：\n1. 风险识别：采用头脑风暴、专家访谈等方法识别项目风险；\n2. 风险评估：使用概率影响矩阵评估风险等级；\n3. 风险应对：制定规避、减轻、转移、接受等应对策略；\n4. 风险监控：建立风险监控机制，定期评估风险状态。',
    implementation: '风险管理实施过程：\n1. 成立风险管理小组，明确职责分工；\n2. 制定风险管理计划和流程；\n3. 定期开展风险识别和评估活动；\n4. 执行风险应对措施并跟踪效果；\n5. 持续优化风险管理机制。',
    results: '通过有效的风险管理，项目取得良好成效：\n1. 项目按时完成率达95%；\n2. 预算控制在10%以内；\n3. 识别的30项风险中有28项得到有效控制；\n4. 用户满意度达到90%以上。',
    conclusion: '信息系统项目风险管理是项目成功的关键因素。通过建立科学的风险管理体系，运用合适的风险管理工具和方法，可以有效降低项目失败概率。未来应进一步完善风险预警机制，提升风险预测能力。',
  },
  keywords: ['项目管理', '风险管理', 'ERP实施', '信息系统'],
  grade: 'good',
  evaluation: {
    strengths: [
      '风险管理流程完整',
      '风险识别全面',
      '效果评估具体'
    ],
    weaknesses: [
      '风险应对措施描述较浅',
      '定量分析不够深入'
    ],
    suggestions: [
      '深化风险应对措施的描述',
      '增加更多定量分析数据'
    ]
  }
};

// 系统分析师案例
export const sysAnalystCase: PaperCase = {
  id: 'sys_analyst_case_001',
  title: '智慧医疗系统需求分析与系统设计',
  subject: '系统分析师',
  year: '2023',
  author: '赵六',
  content: {
    abstract: '本文以某三甲医院智慧医疗系统建设为例，详细阐述了复杂信息系统的需求分析与系统设计过程。通过科学的需求分析方法和系统的设计理念，构建了满足医患需求的智慧医疗平台。',
    background: '为提升医疗服务质量和效率，该医院启动智慧医疗系统建设项目。项目旨在通过信息化手段优化就医流程，提升医疗服务质量，实现医疗资源的有效配置。系统涉及门诊、住院、药房、检验等多个业务环节。',
    problemAnalysis: '传统医疗模式存在的问题：\n1. 就医流程复杂，患者排队时间长；\n2. 医疗信息孤立，医生无法快速获取完整病历；\n3. 资源配置不合理，设备利用率低；\n4. 数据统计分析能力弱，决策缺乏数据支撑。',
    solution: '采用面向服务的架构(SOA)设计思路：\n1. 建立统一身份认证和权限管理；\n2. 构建患者主索引(PMI)实现信息关联；\n3. 设计松耦合的服务接口支持系统集成；\n4. 建立数据仓库支持决策分析。',
    implementation: '系统设计与实现过程：\n1. 业务流程梳理和需求建模；\n2. 系统架构设计和技术选型；\n3. 数据库设计和接口规范制定；\n4. 系统开发和集成测试；\n5. 用户培训和系统上线。',
    results: '系统上线后效果显著：\n1. 患者平均就诊时间减少30%；\n2. 医生工作效率提升25%；\n3. 医疗差错率降低50%；\n4. 患者满意度提升至95%。',
    conclusion: '智慧医疗系统建设需要充分考虑医疗业务特点和用户需求。通过科学的系统分析和设计方法，可以有效解决传统医疗模式的问题。未来需持续优化系统功能，适应医疗行业的发展变化。',
  },
  keywords: ['需求分析', '系统设计', '智慧医疗', 'SOA'],
  grade: 'pass',
  evaluation: {
    strengths: [
      '业务理解较为深入',
      '系统设计思路清晰',
      '实施效果明显'
    ],
    weaknesses: [
      '技术深度有待提升',
      '创新性不够突出'
    ],
    suggestions: [
      '加强前沿技术的应用',
      '突出设计的创新亮点'
    ]
  }
};

// 新增案例 - 系统架构设计师优秀案例
export const sysArchCase1: PaperCase = {
  id: 'sys_arch_case_001',
  title: '论基于架构的软件设计方法(ABSD)及应用',
  subject: '系统架构设计师',
  year: '2024',
  author: '张三',
  content: {
    abstract: '本文以某大型电商平台的分布式系统重构项目为例，详细阐述了基于架构的软件设计方法(ABSD)在实际项目中的应用。通过ABSD方法，我们成功设计了高可用、高性能的分布式架构，解决了原有系统的性能瓶颈和扩展性问题。本文从架构设计的角度，探讨了ABSD方法的核心原则、实施步骤和关键技术，为类似项目提供了参考。',
    background: '某大型电商平台成立于2015年，是国内领先的B2C电子商务平台之一。经过近10年的发展，平台用户规模已超过3亿，日活跃用户达到5000万，日订单量超过100万单。随着业务的快速发展和用户量的爆发式增长，原有系统的单体架构逐渐暴露出越来越多的问题，无法满足日益增长的业务需求和技术挑战。在业务方面，平台不断拓展新的业务领域，如跨境电商、生鲜电商、直播电商等，每个新业务都需要快速上线和迭代。在技术方面，原有单体架构面临着性能瓶颈、扩展性差、维护成本高等问题，严重制约了业务的快速发展。为了解决这些问题，公司于2023年初决定启动系统重构项目，采用基于架构的软件设计方法(ABSD)进行系统架构设计，目标是构建一个高可用、高性能、可扩展的分布式架构。',
    problemAnalysis: '1. 性能瓶颈：原有系统采用单体架构，所有业务逻辑都部署在一个应用中，随着用户量和数据量的增长，系统响应速度明显下降。高峰期系统响应时间经常超过5秒，甚至出现超时现象，严重影响用户体验。数据库也成为性能瓶颈，单库单表的数据量已经超过10亿条，查询和写入性能急剧下降。2. 扩展性差：系统模块之间耦合度高，各个业务模块之间存在大量的直接依赖关系，新增功能需要修改大量代码，导致开发周期长，上线风险大。当某个业务模块需要扩容时，必须对整个系统进行扩容，资源利用率低，成本高。3. 维护成本高：系统代码量超过500万行，代码复杂度高，模块之间的依赖关系复杂，难以理解和维护。新员工上手时间长，通常需要3-6个月才能熟悉系统。每次发布都需要进行全量测试，发布周期长，风险大。4. 可靠性不足：单点故障问题严重，一旦应用服务器或数据库出现故障，可能导致整个系统不可用，影响公司业务的正常运行。系统可用性只有99.5%，每年停机时间超过40小时，远低于行业平均水平。',
    solution: '采用基于架构的软件设计方法(ABSD)进行系统架构设计，主要包括以下步骤：1. 架构需求分析：首先明确系统的功能需求和质量需求。功能需求包括用户管理、商品管理、订单管理、支付管理、物流管理等核心业务模块,质量需求包括性能（响应时间<100ms）、可用性（99.99%）、可扩展性（支持水平扩展）、安全性（符合等保三级要求）等。同时，考虑系统的约束条件，如现有技术栈、团队技能、预算和时间等。2. 架构设计：采用分层架构和微服务架构，将系统拆分为多个独立的服务。分层架构包括表现层、业务逻辑层、数据访问层和基础设施层；微服务架构将系统拆分为用户服务、商品服务、订单服务、支付服务、物流服务等20多个独立的服务，每个服务负责特定的业务领域，服务之间通过RESTful API或消息队列进行通信。3. 架构评估：使用ATAM（架构权衡分析方法）对设计的架构进行评估，识别影响系统质量的关键场景，如性能场景、可靠性场景、安全性场景等。对每个场景进行分析，评估架构的满足程度，识别潜在的风险和问题。4. 架构实现：按照设计的架构，逐步实现各个服务模块。采用Spring Cloud微服务框架，使用Docker容器化部署，Kubernetes进行容器编排。数据库采用分库分表策略，将大表拆分为多个小表，提高查询和写入性能。引入Redis缓存，缓存热点数据，提高系统响应速度。5. 架构演进：建立架构演进机制，持续优化和改进架构。通过监控系统运行状态，收集性能指标和用户反馈，识别架构中的问题和瓶颈。定期进行架构评审，根据业务需求和技术发展，调整和优化架构设计。6. 质量保证：建立完善的质量保证体系，包括代码审查、自动化测试、性能测试、安全测试等。采用CI/CD流程，实现自动化构建、测试和部署，提高开发效率和代码质量。',
    implementation: '1. 技术选型：经过充分的技术调研和评估，选择了Spring Cloud作为微服务框架，Docker作为容器化技术，Kubernetes作为容器编排工具。数据库选择了MySQL+Redis的组合，MySQL用于持久化存储，Redis用于缓存。消息队列选择了Kafka，用于服务之间的异步通信。2. 服务拆分：根据业务领域和康威定律，将系统拆分为20多个独立的服务。每个服务由独立的团队负责开发、测试和部署。服务之间通过RESTful API进行同步通信，通过Kafka进行异步通信。建立了服务注册与发现中心（Eureka）、配置中心（Spring Cloud Config）、API网关（Spring Cloud Gateway）等基础设施服务。3. 数据分片：对用户表、订单表、商品表等大数据量的表进行了分库分表。采用水平分表的方式，根据用户ID或订单ID进行分片，将每个表拆分为1024个分片，分布在16个数据库节点上。同时，引入了分库分表中间件（ShardingSphere），简化了分库分表的实现和管理。4. 缓存策略：引入了Redis集群，缓存热点数据，如用户信息、商品信息、订单信息等。采用了多级缓存策略，包括本地缓存（Caffeine）和分布式缓存（Redis），提高了缓存命中率和系统响应速度。同时，实现了缓存穿透、缓存击穿和缓存雪崩的解决方案，确保缓存系统的可靠性。5. 可靠性设计：实现了服务降级、熔断、限流等机制，提高系统的可靠性和容错能力。采用了Hystrix作为服务容错框架，实现了服务降级和熔断；使用Sentinel作为流量控制框架，实现了限流和熔断。同时，实现了服务的健康检查和自动恢复机制，当服务出现故障时，能够自动将流量转移到健康的服务实例上。6. 监控体系：建立了完善的监控和日志系统，实时监控系统运行状态。采用Prometheus+Grafana作为监控平台，监控系统的性能指标、可用性、资源使用率等；使用ELK Stack（Elasticsearch+Logstash+Kibana）作为日志管理平台，收集和分析系统日志；引入了APM工具（SkyWalking），实现了分布式链路追踪，便于定位和分析系统问题。7. 安全设计：按照等保三级要求，实现了完善的安全机制。包括身份认证（JWT）、授权（RBAC）、加密（HTTPS、AES）、防SQL注入、防XSS攻击、防CSRF攻击等。定期进行安全漏洞扫描和渗透测试，及时发现和修复安全问题。',
    results: '1. 性能提升：系统重构后，性能得到了显著提升。系统响应时间从原来的平均500ms降低到100ms以下，高峰期系统响应时间也能保持在200ms以内。数据库查询性能提高了10倍，写入性能提高了5倍。系统能够支持每秒处理10万+请求，日订单处理能力从100万单提升到1000万单。2. 扩展性增强：采用微服务架构后，系统的扩展性得到了极大的提高。各个服务可以独立开发、部署和扩展，当某个服务需要扩容时，只需要增加该服务的实例即可，不需要对整个系统进行扩容。资源利用率提高了60%，成本降低了40%。新功能的开发周期从原来的3-6个月缩短到2-4周，上线风险大大降低。3. 维护成本降低：系统模块化程度提高，代码复杂度降低，维护成本降低了60%。新员工上手时间从原来的3-6个月缩短到1-2个月。采用CI/CD流程后，发布周期从原来的2周缩短到1天，发布风险大大降低。系统的可测试性提高，自动化测试覆盖率达到80%以上。4. 可靠性提高：系统可用性从原来的99.5%提高到99.99%，每年停机时间从40小时降低到4小时以下。实现了自动故障检测和恢复机制，当某个服务实例出现故障时，能够自动将流量转移到健康的实例上，确保系统持续可用。5. 团队效率提升：采用微服务架构后，团队的组织结构也进行了调整，按照业务领域划分为多个小团队，每个团队负责2-3个服务。团队的自主性和责任感增强，开发效率提高了50%。同时，团队之间的协作更加顺畅，沟通成本降低了40%。6. 业务支撑能力增强：新架构能够更好地支撑业务的快速发展，支持业务的快速创新和迭代。系统重构后，公司成功上线了跨境电商、生鲜电商、直播电商等新业务，业务规模和收入实现了快速增长。',
    conclusion: '基于架构的软件设计方法(ABSD)是一种有效的软件架构设计方法，它能够帮助我们设计出高质量、可扩展、易维护的软件架构。在本次系统重构项目中，我们成功应用ABSD方法，构建了一个高可用、高性能、可扩展的分布式架构，解决了原有系统的性能瓶颈、扩展性差、维护成本高等问题。通过本次项目实践，我们深刻认识到架构设计在软件系统中的重要性。一个好的架构设计能够提高系统的性能、可用性和可扩展性，降低维护成本，支撑业务的快速发展。同时，我们也认识到架构设计是一个持续的过程，需要根据业务需求和技术发展不断调整和优化。在实际项目中，应用ABSD方法需要注意以下几点：首先，要充分理解业务需求和质量需求，明确架构设计的目标；其次，要选择合适的架构风格和技术栈，考虑团队技能和现有系统的约束；第三，要重视架构评估，识别潜在的风险和问题；第四，要建立完善的质量保证体系，确保架构的实现质量；最后，要建立架构演进机制，持续优化和改进架构。未来，我们将继续深入研究和应用ABSD方法，不断提高架构设计能力。同时，我们也将关注新兴技术的发展，如云原生、Serverless、AI等，将这些技术应用到架构设计中，构建更加先进、高效的软件系统。通过持续的架构优化和技术创新，支撑公司业务的快速发展，提高公司的核心竞争力。'
  },
  keywords: ['ABSD', '微服务架构', '分布式系统', '架构设计'],
  grade: 'excellent',
  evaluation: {
    strengths: ['架构设计思路清晰', '技术选型合理', '实现步骤详细', '结果数据具体', '经验总结到位'],
    weaknesses: ['部分技术细节描述不够深入', '架构演进机制介绍简单'],
    suggestions: ['增加更多技术细节的描述', '详细介绍架构演进的具体实践', '补充架构评估的具体过程和结果']
  }
};

// 所有案例列表 - 包含全部案例
export const paperCases: PaperCase[] = [
  sysArchExcellentCase,
  sysArchGoodCase,
  projMgrCase,
  sysAnalystCase,
  sysArchCase1
];

// 根据科目获取案例
export const getCasesBySubject = (subject: string): PaperCase[] => {
  return paperCases.filter(paperCase => 
    paperCase.subject.toLowerCase().includes(subject.toLowerCase())
  );
};

// 根据ID获取案例
export const getCaseById = (id: string): PaperCase | undefined => {
  return paperCases.find(paperCase => paperCase.id === id);
};

// 根据年份获取案例
export const getCasesByYear = (year: string): PaperCase[] => {
  return paperCases.filter(paperCase => paperCase.year === year);
};

// 根据等级获取案例
export const getCasesByGrade = (grade: string): PaperCase[] => {
  return paperCases.filter(paperCase => paperCase.grade === grade);
};

// 获取所有案例
export const getAllCases = (): PaperCase[] => {
  return paperCases;
};